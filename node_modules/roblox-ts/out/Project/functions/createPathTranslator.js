"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.createPathTranslator = void 0;
const byots_1 = __importDefault(require("byots"));
const path_1 = __importDefault(require("path"));
const PathTranslator_1 = require("../../Shared/classes/PathTranslator");
const findAncestorDir_1 = require("../../Shared/util/findAncestorDir");
const getRootDirs_1 = require("../../Shared/util/getRootDirs");
function createPathTranslator(program) {
    const compilerOptions = program.getCompilerOptions();
    const rootDir = findAncestorDir_1.findAncestorDir([program.getProgram().getCommonSourceDirectory(), ...getRootDirs_1.getRootDirs(compilerOptions)]);
    const outDir = compilerOptions.outDir;
    let buildInfoPath = byots_1.default.getTsBuildInfoEmitOutputFilePath(compilerOptions);
    if (buildInfoPath !== undefined) {
        buildInfoPath = path_1.default.normalize(buildInfoPath);
    }
    const declaration = compilerOptions.declaration === true;
    return new PathTranslator_1.PathTranslator(rootDir, outDir, buildInfoPath, declaration);
}
exports.createPathTranslator = createPathTranslator;
//# sourceMappingURL=createPathTranslator.js.map